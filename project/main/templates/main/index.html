<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
        <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
        <link rel="stylesheet" href="{% static 'css/index.css' %}">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
        <title>Visualization</title>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/modules/export-data.js"></script>
        <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    </head>
    <body>
        <header>
            <div style="width:100%;height:450px;">
                <figure class="highcharts-figure">
                    <div id="container"></div>
                  </figure>
            </div>
        </header>
    <div id=tab></div>
    <script>
        let positive_rate=[0, 0, 0, 0, 72.32315789473684, 58.82194444444443, 50.36357142857143, 52.47133333333334, 52.755217391304335, 56.91554455445543, 52.28142857142856, 49.827547169811325, 49.18967213114754, 57.63489795918365, 59.838214285714294, 62.254897959183666, 57.022439024390245, 46.913243243243244, 47.110151515151514, 43.99176470588235, 46.17797101449276, 54.972931034482755, 45.53011235955056, 46.91929824561403, 47.877666666666656, 53.20129032258065, 49.19193548387099, 55.461666666666666, 57.86999999999998, 64.22399999999999, 53.10555555555556, 48.533, 50.65833333333334, 45.73375000000001, 56.59559999999998, 51.50277777777777, 64.439, 61.288918918918924, 67.91444444444443, 52.31923076923077, 48.62222222222223, 55.96464285714285, 63.08416666666668, 57.7203448275862, 56.379999999999995, 61.00000000000001, 53.94500000000001, 34.0, 68.56333333333333, 57.169999999999995, 49.86, 53.082499999999996, 55.90833333333334, 56.413333333333334, 55.220000000000006, 75.92500000000001, 64.07000000000001, 32.466, 35.83, 54.36, 45.25600000000001, 43.474999999999994, 0, 72.12333333333333, 40.64, 50.67333333333334, 74.44666666666667, 49.6, 32.785999999999994, 44.086, 58.730000000000004, 35.202, 42.727500000000006, 50.91142857142857, 66.33, 41.99571428571428, 0, 87.24000000000001, 0, 86.495, 42.6, 17.57, 34.61, 67.37333333333333, 34.39, 88.9, 0, 0, 54.05, 33.87, 82.32000000000001, 0, 0, 89.62, 67.99, 72.6, 64.16, 0, 0, 0, 0, 74.97, 29.195, 81.97, 88.26, 60.945, 0, 0, 51.080000000000005, 0, 0, 91.075, 0, 77.405, 0, 0, 55.74, 0, 51.61, 84.85, 0, 0, 79.91, 0, 47.055, 0, 70.065, 46.832499999999996, 21.56, 0, 0, 54.05, 0, 0, 59.86, 46.56, 0, 90.09, 0, 37.96, 0, 0, 0, 53.22, 0, 0, 38.23, 0, 0, 0, 0, 85.13, 0, 86.66, 0, 0, 53.580000000000005, 0, 0]
        let interest_date=['04월 25일', '04월 26일', '04월 27일', '04월 28일', '04월 29일', '04월 30일', '05월 01일', '05월 02일', '05월 03일', '05월 04일', '05월 05일', '05월 06일', '05월 07일', '05월 08일', '05월 09일', '05월 10일', '05월 11일', '05월 12일', '05월 13일', '05월 14일', '05월 15일', '05월 16일', '05월 17일', '05월 18일', '05월 19일', '05월 20일', '05월 21일', '05월 22일', '05월 23일', '05월 24일', '05월 25일', '05월 26일', '05월 27일', '05월 28일', '05월 29일', '05월 30일', '05월 31일', '06월 01일', '06월 02일', '06월 03일', '06월 04일', '06월 05일', '06월 06일', '06월 07일', '06월 08일', '06월 09일', '06월 10일', '06월 11일', '06월 12일', '06월 13일', '06월 14일', '06월 15일', '06월 16일', '06월 17일', '06월 18일', '06월 19일', '06월 20일', '06월 21일', '06월 22일', '06월 23일', '06월 24일', '06월 25일', '06월 26일', '06월 27일', '06월 28일', '06월 29일', '06월 30일', '07월 01일', '07월 02일', '07월 03일', '07월 04일', '07월 05일', '07월 06일', '07월 07일', '07월 08일', '07월 09일', '07월 10일', '07월 11일', '07월 12일', '07월 13일', '07월 14일', '07월 15일', '07월 16일', '07월 17일', '07월 18일', '07월 19일', '07월 20일', '07월 21일', '07월 22일', '07월 23일', '07월 24일', '07월 25일', '07월 26일', '07월 27일', '07월 28일', '07월 29일', '07월 30일', '07월 31일', '08월 01일', '08월 02일', '08월 03일', '08월 04일', '08월 05일', '08월 06일', '08월 07일', '08월 08일', '08월 09일', '08월 10일', '08월 11일', '08월 12일', '08월 13일', '08월 14일', '08월 15일', '08월 16일', '08월 17일', '08월 18일', '08월 19일', '08월 20일', '08월 21일', '08월 22일', '08월 23일', '08월 24일', '08월 25일', '08월 26일', '08월 27일', '08월 28일', '08월 29일', '08월 30일', '08월 31일', '09월 01일', '09월 02일', '09월 03일', '09월 04일', '09월 05일', '09월 06일', '09월 07일', '09월 08일', '09월 09일', '09월 10일', '09월 11일', '09월 12일', '09월 13일', '09월 14일', '09월 15일', '09월 16일', '09월 17일', '09월 18일', '09월 19일', '09월 20일', '09월 21일', '09월 22일', '09월 23일', '09월 24일', '09월 25일', '09월 26일', '09월 27일', '09월 28일', '09월 29일', '09월 30일'];
        Highcharts.chart('container', {
            chart: {
                type: 'line'
            },
            title: {
                text: '한강 의대생 키워드 기반 호감도 및 관심도'
            },
            xAxis: {
                categories: interest_date
            },
            yAxis: {
                title: {
                text: 'Percentage (%)'
                }
            },
            plotOptions: {
                line: {
                dataLabels: {
                    enabled: false
                },
                enableMouseTracking: true
                },
                series: {
                    cursor: 'pointer',
                    point: {
                        events: {
                            click: function () {
                                var tmp="";
                                tmp=this.category
                                execute(tmp);
                            }
                        }
                    }
                }
            },
            series: [{
                name: '호감도',
                color:'pink',
                data: [0, 0, 0, 0, 72.32315789473684, 58.82194444444443, 50.36357142857143, 52.47133333333334, 52.755217391304335, 56.91554455445543, 52.28142857142856, 49.827547169811325, 49.18967213114754, 57.63489795918365, 59.838214285714294, 62.254897959183666, 57.022439024390245, 46.913243243243244, 47.110151515151514, 43.99176470588235, 46.17797101449276, 54.972931034482755, 45.53011235955056, 46.91929824561403, 47.877666666666656, 53.20129032258065, 49.19193548387099, 55.461666666666666, 57.86999999999998, 64.22399999999999, 53.10555555555556, 48.533, 50.65833333333334, 45.73375000000001, 56.59559999999998, 51.50277777777777, 64.439, 61.288918918918924, 67.91444444444443, 52.31923076923077, 48.62222222222223, 55.96464285714285, 63.08416666666668, 57.7203448275862, 56.379999999999995, 61.00000000000001, 53.94500000000001, 34.0, 68.56333333333333, 57.169999999999995, 49.86, 53.082499999999996, 55.90833333333334, 56.413333333333334, 55.220000000000006, 75.92500000000001, 64.07000000000001, 32.466, 35.83, 54.36, 45.25600000000001, 43.474999999999994, 0, 72.12333333333333, 40.64, 50.67333333333334, 74.44666666666667, 49.6, 32.785999999999994, 44.086, 58.730000000000004, 35.202, 42.727500000000006, 50.91142857142857, 66.33, 41.99571428571428, 0, 87.24000000000001, 0, 86.495, 42.6, 17.57, 34.61, 67.37333333333333, 34.39, 88.9, 0, 0, 54.05, 33.87, 82.32000000000001, 0, 0, 89.62, 67.99, 72.6, 64.16, 0, 0, 0, 0, 74.97, 29.195, 81.97, 88.26, 60.945, 0, 0, 51.080000000000005, 0, 0, 91.075, 0, 77.405, 0, 0, 55.74, 0, 51.61, 84.85, 0, 0, 79.91, 0, 47.055, 0, 70.065, 46.832499999999996, 21.56, 0, 0, 54.05, 0, 0, 59.86, 46.56, 0, 90.09, 0, 37.96, 0, 0, 0, 53.22, 0, 0, 38.23, 0, 0, 0, 0, 85.13, 0, 86.66, 0, 0, 53.580000000000005, 0, 0]
            }, {
                name: '관심도',
                color:'skyblue',
                data: [0.0, 0.0, 0.0, 0.22478, 10.72744, 75.87886, 41.56728, 22.49141, 62.70995, 100.0, 71.07087, 87.42428, 74.29909, 57.09022, 47.16203, 53.7496, 52.77552, 80.60568, 77.57102, 52.60068, 34.28036, 29.31002, 30.26537, 30.55885, 27.85513, 33.25632, 25.94442, 16.70309, 14.62379, 14.82984, 12.76303, 10.02185, 11.0896, 9.84701, 8.49203, 17.26506, 12.03871, 8.82297, 7.52419, 7.44926, 6.33156, 4.65188, 4.03371, 6.06931, 4.83921,4.55198, 4.50827, 5.07024, 3.44052, 3.22197, 3.98376, 3.61536, 3.41554, 3.67155, 3.30315, 2.99094, 2.84108, 3.00343, 2.67873, 2.44146, 2.67873, 3.36559, 3.11582, 3.24071, 6.63128, 3.80268, 2.57258, 1.68591, 1.34249, 1.89822, 1.72962, 1.44864, 1.53605, 1.53605, 1.5423, 1.41742, 1.47986, 1.31127, 1.29253, 1.37995, 1.07399, 1.35497, 1.13643, 1.26131, 1.46113, 1.2176, 1.05526, 1.1177, 1.3862, 1.12394, 1.13019, 1.26131, 1.18014, 1.1177, 1.16765, 1.23009, 1.09896, 0.99906, 0.94911, 2.03559, 1.47986, 1.04277, 1.39244, 1.82953, 1.35497, 1.30502, 0.99281, 1.1177, 1.13643, 1.28004, 0.93037, 1.09272, 1.12394, 1.20512, 1.37995, 1.14892, 1.2738, 1.25507, 1.44239, 1.39868, 1.66718, 1.46737, 1.33, 1.20512, 1.68591, 1.41742, 1.40493, 1.23634, 1.26131, 0.99906, 1.09272, 0.99906, 1.39868, 1.10521, 0.7368, 0.85544, 0.94911, 0.89291, 0.6931, 0.87418, 1.14892, 0.89291, 0.86793, 1.12394, 1.03652, 1.0053, 0.8492, 0.83671, 0.83671, 0.91788, 0.93037, 1.23009, 1.04901, 1.08648, 1.08023, 0.71807, 1.07399, 0.96159, 1.24882]
            }]
        });
    </script>
    </body>
</html>

<script>
    let twi=[
        {% for data in datas reversed %}
            {
                date:"{{data.date}}",
                username:"{{data.username}}",
                url:"{{data.url}}"
            },
        {% endfor %}
    ]
    let news=[
        {% for data2 in datas2%}
            {
                date:"{{data2.date}}",
                username:"{{data2.title}}",
                url:"{{data2.url}}"
            },
        {% endfor %}
    ]
    function execute(tmp){
        var html="";
        html+="<div style='width:50%; border:1px solid red; float:left;font-size:12px;'>";
        html+="<table class='table' style='width:100%;table-layout:fixed;'>";
        html+="<colgroup>";
        html+="<col width='8%' />";
        html+="<col width='24%' />";
        html+="<col width='33%' />";
        html+="<col width='35%' />";
        html+="</colgroup>";
        html+="<tr>";
        html+="<th>No.</th>";
        html+="<th>DATE</th>";
        html+="<th>USERNAME</th>";
        html+="<th>URL</th>";
        html+="</tr>";
        var j=1;
        for (var i=0; i<twi.length; i++){
            if (tmp==twi[i].date){
                html+="<tr>";
                html+="<td>"+j+"</td>";
                html+="<td style = 'word-break: break-all'>"+twi[i].date+"</td>";
                html+="<td style = 'word-break: break-all'>"+twi[i].username+"</td>";
                html+="<td style = 'word-break: break-all'><a href="+twi[i].url+">"+twi[i].url+"</a></td>";
                html+="</tr>";    
                j=j+1;        
            }
        }
        html+="</table>";
        html+="</div>";
        html+="<div style='width:49%;border:1px solid red; float:right;font-size:12px;'>";
        html+="<table class='table' style='width:100%;table-layout:fixed;'>";
        html+="<colgroup>";
        html+="<col width='8%' />";
        html+="<col width='24%' />";
        html+="<col width='33%' />";
        html+="<col width='35%' />";
        html+="</colgroup>";
        html+="<tr>";
        html+="<th>No.</th>";
        html+="<th>DATE</th>";
        html+="<th>TITLE</th>";
        html+="<th>URL</th>";
        html+="</tr>";
        var j=1;
        for (var i=0; i<news.length; i++){
            if (tmp==news[i].date){
                html+="<tr>";
                html+="<td>"+j+"</td>";
                html+="<td style = 'word-break: break-all'>"+news[i].date+"</td>";
                html+="<td style = 'word-break: break-all'>"+news[i].username+"</td>";
                html+="<td style = 'word-break: break-all'><a href="+news[i].url+">"+news[i].url+"</a></td>";
                html+="</tr>";    
                j=j+1;        
            }
        }
        html+="</table>";
        html+="</div>";

        document.getElementById("tab").innerHTML=html;
    }
</script>
